<!-- navigation -->
<header class="navigation">
  <div class="container">
    <!-- navbar -->
    <nav class="navbar navbar-expand-lg navbar-light justify-content-between">
      <!-- navbar brand/logo -->
      <a class="navbar-brand" href="{{ site.BaseURL | relLangURL }}">
        {{ partial "logo.html" . }}
      </a>


      <div class="d-flex align-items-center">

        {{ if site.Params.navigation_button.enable }}
        <!-- Appearance Settings -->
        <div class="dropdown">
          <button class="btn btn-primary ms-lg-4 mt-2 mt-lg-0 dropdown-toggle" 
            data-bs-toggle="dropdown" 
            aria-haspopup="true"
            aria-expanded="false">
            <i class="fas fa-sliders"></i>
            {{ site.Params.navigation_button.label }}
          </button>
          <ul class="dropdown-menu">
            <li> <a class="dropdown-item theme-switcher">Theme Switcher</a> </li>
            <li>
              {{ partial "switch" . }} 
            </li>
          </ul>
        </div> 

        {{ end }}
      </div>


    </nav>
  </div>
</header>
<!-- /navigation -->


<!-- theme switcher -->
{{ if site.Params.theme_switcher }}
<script>
  var darkMode = {{if eq site.Params.theme_default "dark"}}true{{else}}false{{end}};
  {{ if eq site.Params.theme_default "automatic" }}
  if (window.matchMedia('(prefers-color-scheme: dark)').matches){darkMode = true}
  {{ end }}
  if (localStorage.getItem('theme') === 'dark'){darkMode = true}
  else if (localStorage.getItem('theme') === 'light'){darkMode = false}
  if (darkMode){document.body.classList.toggle('dark')}
  document.addEventListener('DOMContentLoaded', () => {
    var themeSwitch = document.querySelectorAll('.theme-switcher');
    [].forEach.call(themeSwitch, function (ts) {
      ts.addEventListener('click', () => {
        document.body.classList.toggle('dark');
        localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light');
      });
    })
  });
</script>
{{ end }}